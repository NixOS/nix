# Some dummy arguments...
{ system ? "@system@"
, foo ? "foo"
}:

assert foo == "foo";

let {

  makeDrv = name: progName: (derivation {
    inherit name progName system;
    builder = "@shell@";
    shell = "@shell@";
    args = ["-e" "-x" ./user-envs.builder.sh];
    PATH = "@testPath@";
  } // {
    meta = {
      description = "A silly test package";
    };
  });

  body = [
    (makeDrv "foo-1.0" "foo")
    (makeDrv "foo-2.0pre1" "foo")
    (makeDrv "bar-0.1" "bar")
    (makeDrv "foo-2.0" "foo")
    (makeDrv "bar-0.1.1" "bar")
  ];
  
}
